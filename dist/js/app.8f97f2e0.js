(function(){"use strict";var n={16:function(n,t,i){n.exports=i.p+"img/ori_12.eae80e16.jpg"},203:function(n,t,i){n.exports=i.p+"img/ori_6.332b31d4.jpg"},1245:function(n,t,i){n.exports=i.p+"img/ori_13_handled.7f0baa37.jpg"},2158:function(n,t,i){n.exports=i.p+"img/ori_7.4af55467.jpg"},2222:function(n,t,i){n.exports=i.p+"img/ori_10_handled.3482ccb2.jpg"},3055:function(n,t,i){n.exports=i.p+"img/ori_8_handled.41cd1ffe.jpg"},3068:function(n,t,i){n.exports=i.p+"img/ori_3_handled.a163d890.jpg"},3469:function(n,t,i){n.exports=i.p+"img/ori_13.025f0b4d.jpg"},3888:function(n,t,i){n.exports=i.p+"img/ori_7_handled.40a66189.jpg"},3922:function(n,t,i){n.exports=i.p+"img/ori_9_handled.ecee886d.jpg"},4215:function(n,t,i){n.exports=i.p+"img/ori_2.f75665ce.jpg"},4975:function(n,t,i){n.exports=i.p+"img/ori_11.d12a8782.jpg"},4978:function(n,t,i){n.exports=i.p+"img/ori_10.6c424f4e.jpg"},5392:function(n,t,i){n.exports=i.p+"img/ori_12_handled.95f6335a.jpg"},6760:function(n,t,i){n.exports=i.p+"img/ori_1.60c4439d.jpg"},7165:function(n,t,i){n.exports=i.p+"img/ori_8.537a81b5.jpg"},7531:function(n,t,i){n.exports=i.p+"img/ori_11_handled.eae9fcf7.jpg"},7578:function(n,t,i){var e=i(5130),o=i(6768);function r(n,t){const i=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(i)}var s=i(1241);const l={},a=(0,s.A)(l,[["render",r]]);var c=a,u=i(1387),p=i.p+"img/car_framework2.c271ab31.png";const g={class:"home"},d={class:"car_framework"},f=["src"],h=["src"],m={class:"container"};function _(n,t,i,e,r,s){return(0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("div",d,[(0,o.Lk)("img",{src:r.originalImgs[r.index],alt:"原图"},null,8,f),t[1]||(t[1]=(0,o.Lk)("img",{src:p,alt:"车内框架"},null,-1)),(0,o.Lk)("img",{src:r.handledImgs[r.index],alt:"处理后的图"},null,8,h)]),(0,o.Lk)("div",m,[(0,o.Lk)("button",{class:"btn",onClick:t[0]||(t[0]=(...n)=>s.clickBtn&&s.clickBtn(...n))},"体验更多")])])}i(4114);var k={data(){return{index:0,timer:null,originalImgs:[i(4215),i(8378),i(6760),i(9273),i(8592),i(8220),i(4975),i(203),i(3469),i(7165),i(16),i(4978),i(2158)],handledImgs:[i(8313),i(3068),i(7882),i(7587),i(3922),i(7790),i(7531),i(8493),i(1245),i(3055),i(5392),i(2222),i(3888)]}},mounted(){this.timer=setInterval((()=>{this.swiper()}),3e3)},beforeUnmount(){clearInterval(this.timer)},methods:{swiper(){this.index++,this.index%=this.originalImgs.length},clickBtn(){this.$router.push("/more_scenes")}}};const v=(0,s.A)(k,[["render",_]]);var L=v,b=i(4232);const y={class:"more"},x={class:"container"},I={key:0,class:"upload_area"},j={class:"upload_left",ref:"uploadLeft"},w={key:0},E={key:1,class:"originalImg"},C=["src"],U={class:"upload_right",ref:"uploadRight"},A={class:"result"},F={key:0,class:"loading"},O={key:1,class:"result_img"},R=["src"],X={key:1,class:"history_area"},S={class:"list"},$={class:"history_img"},T=["src"],B={class:"history_img"},P=["src"];function M(n,t,i,e,r,s){return(0,o.uX)(),(0,o.CE)("div",y,[(0,o.Lk)("div",x,[t[12]||(t[12]=(0,o.Lk)("a",{href:"/",class:"back"},[(0,o.Lk)("span",null,"🢦"),(0,o.eW)(" 首页")],-1)),(0,o.Lk)("div",{class:"toggle_btn",onClick:t[0]||(t[0]=n=>r.showUpload=!r.showUpload)},[(0,o.Lk)("button",null,(0,b.v_)(r.showUpload?"收起上传区":"展开上传区"),1)]),r.showUpload?((0,o.uX)(),(0,o.CE)("div",I,[(0,o.Lk)("div",j,[r.originalImgFlag?((0,o.uX)(),(0,o.CE)("div",E,[(0,o.Lk)("input",{type:"file",ref:"input_img2",onChange:t[3]||(t[3]=(...n)=>s.handleInputImg&&s.handleInputImg(...n))},null,544),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...n)=>s.uploadImg2&&s.uploadImg2(...n))},"继续上传"),(0,o.Lk)("img",{src:r.originalImg,alt:"原图"},null,8,C)])):((0,o.uX)(),(0,o.CE)("div",w,[t[6]||(t[6]=(0,o.Lk)("h3",null,"开始上传",-1)),(0,o.Lk)("div",{class:"upload_btn",onClick:t[2]||(t[2]=(...n)=>s.uploadImg1&&s.uploadImg1(...n))},[(0,o.Lk)("input",{type:"file",ref:"input_img1",onChange:t[1]||(t[1]=(...n)=>s.handleInputImg&&s.handleInputImg(...n))},null,544),t[5]||(t[5]=(0,o.Lk)("div",{class:"mask"},[(0,o.Lk)("i",{class:"iconfont icon-icon_update"})],-1))])]))],512),(0,o.Lk)("div",U,[t[8]||(t[8]=(0,o.Lk)("div",{class:"title"},"处理效果",-1)),(0,o.Lk)("div",A,[r.isLoading?((0,o.uX)(),(0,o.CE)("div",F,t[7]||(t[7]=[(0,o.Lk)("div",{class:"loader"},null,-1),(0,o.Lk)("div",null,"处理中...",-1)]))):((0,o.uX)(),(0,o.CE)("div",O,[(0,o.Lk)("img",{src:r.resultImgUrl,alt:"效果图"},null,8,R)]))])],512)])):(0,o.Q3)("",!0),r.historyList.length?((0,o.uX)(),(0,o.CE)("div",X,[t[11]||(t[11]=(0,o.Lk)("h2",null,"历史记录",-1)),(0,o.Lk)("div",S,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.historyList,((n,i)=>((0,o.uX)(),(0,o.CE)("div",{class:"item",key:i},[(0,o.Lk)("div",$,[t[9]||(t[9]=(0,o.Lk)("span",null,"原图",-1)),(0,o.Lk)("img",{src:n.original,alt:"原图"},null,8,T)]),(0,o.Lk)("div",B,[t[10]||(t[10]=(0,o.Lk)("span",null,"效果图",-1)),(0,o.Lk)("img",{src:n.handled,alt:"效果图"},null,8,P)])])))),128))])])):(0,o.Q3)("",!0)])])}var W=i(4373),D={data(){return{showUpload:!0,originalImgFlag:!1,originalImg:null,uploadedFilename:"",resultImgUrl:"",isLoading:!0,BASE_URL:"https://0622-223-83-2-219.ngrok-free.app",historyList:[]}},methods:{uploadImg1(){this.$refs.input_img1.click()},uploadImg2(){this.$refs.input_img2.click()},resetValue(){this.isLoading=!0},handleInputImg(n){const t=n.target.files[0];if(t&&t.type.startsWith("image/")){const n=new FileReader;n.onload=n=>{this.originalImg=n.target.result,this.originalImgFlag=!0,this.beginAnimate()},n.readAsDataURL(t);const i=new FormData;i.append("file",t),this.uploadedFilename=t.name,console.log("handleInputImg"),this.resetValue(),W.A.post(this.BASE_URL+"/upload",i).then((()=>{this.triggerEnhance()})).catch((n=>{console.error("上传失败:",n)}))}else alert("请选择有效的图片文件（jpg/png等）")},beginAnimate(){this.$nextTick((()=>{const n=this.$refs.uploadLeft,t=this.$refs.uploadRight;n.style.transition="all 1s",n.style.marginLeft="0px",setTimeout((()=>{t.style.transition="all 1s",t.style.opacity=1}),500)}))},triggerEnhance(){console.log("triggerEnhance"),W.A.post(this.BASE_URL+"/run").then((n=>{console.log("处理成功"+n.data),this.pollForResult()})).catch((n=>{console.error("触发处理失败:",n)}))},pollForResult(){console.log("pollForResult");const n=this.uploadedFilename,t=`${this.BASE_URL}/result/handled/${n}`,i=()=>{W.A.get(t,{responseType:"blob"}).then((n=>{console.log(n),this.resultImgUrl=t,this.isLoading=!1,this.historyList.unshift({original:this.originalImg,handled:this.resultImgUrl})})).catch((()=>{setTimeout(i,2e3)}))};i()}}};const Q=(0,s.A)(D,[["render",M]]);var V=Q;const K=[{path:"/",name:"home",component:L},{path:"/more_scenes",name:"moreScenes",component:V}],q=(0,u.aE)({history:(0,u.LA)("/"),routes:K});var z=q,G=i(782),H=(0,G.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,e.Ef)(c).use(H).use(z).mount("#app")},7587:function(n,t,i){n.exports=i.p+"img/ori_4_handled.0a1d2218.png"},7790:function(n,t,i){n.exports=i.p+"img/ori_5_handled.9c9ccdef.jpg"},7882:function(n,t,i){n.exports=i.p+"img/ori_1_handled.3e8e67b7.jpg"},8220:function(n,t,i){n.exports=i.p+"img/ori_5.cb54a709.jpg"},8313:function(n,t,i){n.exports=i.p+"img/ori_2_handled.a76ad791.jpg"},8378:function(n,t,i){n.exports=i.p+"img/ori_3.6d7d06c4.jpg"},8493:function(n,t,i){n.exports=i.p+"img/ori_6_handled.274f1344.jpg"},8592:function(n,t,i){n.exports=i.p+"img/ori_9.cd4bf706.jpg"},9273:function(n,t,i){n.exports=i.p+"img/ori_4.fe7c1f9d.jpg"}},t={};function i(e){var o=t[e];if(void 0!==o)return o.exports;var r=t[e]={exports:{}};return n[e].call(r.exports,r,r.exports,i),r.exports}i.m=n,function(){var n=[];i.O=function(t,e,o,r){if(!e){var s=1/0;for(u=0;u<n.length;u++){e=n[u][0],o=n[u][1],r=n[u][2];for(var l=!0,a=0;a<e.length;a++)(!1&r||s>=r)&&Object.keys(i.O).every((function(n){return i.O[n](e[a])}))?e.splice(a--,1):(l=!1,r<s&&(s=r));if(l){n.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=n.length;u>0&&n[u-1][2]>r;u--)n[u]=n[u-1];n[u]=[e,o,r]}}(),function(){i.n=function(n){var t=n&&n.__esModule?function(){return n["default"]}:function(){return n};return i.d(t,{a:t}),t}}(),function(){i.d=function(n,t){for(var e in t)i.o(t,e)&&!i.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()}(),function(){i.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)}}(),function(){i.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}}(),function(){i.p="/"}(),function(){var n={524:0};i.O.j=function(t){return 0===n[t]};var t=function(t,e){var o,r,s=e[0],l=e[1],a=e[2],c=0;if(s.some((function(t){return 0!==n[t]}))){for(o in l)i.o(l,o)&&(i.m[o]=l[o]);if(a)var u=a(i)}for(t&&t(e);c<s.length;c++)r=s[c],i.o(n,r)&&n[r]&&n[r][0](),n[r]=0;return i.O(u)},e=self["webpackChunklow_light_enhance"]=self["webpackChunklow_light_enhance"]||[];e.forEach(t.bind(null,0)),e.push=t.bind(null,e.push.bind(e))}();var e=i.O(void 0,[504],(function(){return i(7578)}));e=i.O(e)})();
//# sourceMappingURL=app.8f97f2e0.js.map