(function(){"use strict";var n={1330:function(n,t,e){n.exports=e.p+"img/handled_4.0a1d2218.png"},1475:function(n,t,e){var i=e(5130),o=e(6768);function l(n,t){const e=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(e)}var s=e(1241);const r={},a=(0,s.A)(r,[["render",l]]);var u=a,c=e(1387),g=e.p+"img/car_framework2.c271ab31.png";const d={class:"home"},p={class:"car_framework"},h=["src"],m=["src"],f={class:"container"};function v(n,t,e,i,l,s){return(0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("div",p,[(0,o.Lk)("img",{src:l.originalImgs[l.index],alt:"原图"},null,8,h),t[1]||(t[1]=(0,o.Lk)("img",{src:g,alt:"车内框架"},null,-1)),(0,o.Lk)("img",{src:l.handledImgs[l.index],alt:"处理后的图"},null,8,m)]),(0,o.Lk)("div",f,[(0,o.Lk)("button",{class:"btn",onClick:t[0]||(t[0]=(...n)=>s.clickBtn&&s.clickBtn(...n))},"体验更多")])])}e(4114);var k={data(){return{index:0,timer:null,originalImgs:[e(4215),e(8378),e(6760),e(9273)],handledImgs:[e(4976),e(9869),e(8703),e(1330)]}},mounted(){this.timer=setInterval((()=>{this.swiper()}),3e3)},beforeUnmount(){clearInterval(this.timer)},methods:{swiper(){this.index++,this.index%=this.originalImgs.length},clickBtn(){this.$router.push("/more_scenes")}}};const L=(0,s.A)(k,[["render",v]]);var y=L,_=e(4232);const I={class:"more"},b={class:"container"},w={key:0,class:"upload_area"},x={class:"upload_left",ref:"uploadLeft"},E={key:0},C={key:1,class:"originalImg"},j=["src"],U={class:"upload_right",ref:"uploadRight"},A={class:"result"},F={key:0,class:"loading"},O={key:1,class:"result_img"},R=["src"],X={key:1,class:"history_area"},S={class:"list"},$={class:"history_img"},T=["src"],B={class:"history_img"},P=["src"];function M(n,t,e,i,l,s){return(0,o.uX)(),(0,o.CE)("div",I,[(0,o.Lk)("div",b,[(0,o.Lk)("div",{class:"toggle_btn",onClick:t[0]||(t[0]=n=>l.showUpload=!l.showUpload)},[(0,o.Lk)("button",null,(0,_.v_)(l.showUpload?"收起上传区":"展开上传区"),1)]),l.showUpload?((0,o.uX)(),(0,o.CE)("div",w,[(0,o.Lk)("div",x,[l.originalImgFlag?((0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("input",{type:"file",ref:"input_img2",onChange:t[3]||(t[3]=(...n)=>s.handleInputImg&&s.handleInputImg(...n))},null,544),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...n)=>s.uploadImg2&&s.uploadImg2(...n))},"继续上传"),(0,o.Lk)("img",{src:l.originalImg,alt:"原图"},null,8,j)])):((0,o.uX)(),(0,o.CE)("div",E,[t[6]||(t[6]=(0,o.Lk)("h3",null,"开始上传",-1)),(0,o.Lk)("div",{class:"upload_btn",onClick:t[2]||(t[2]=(...n)=>s.uploadImg1&&s.uploadImg1(...n))},[(0,o.Lk)("input",{type:"file",ref:"input_img1",onChange:t[1]||(t[1]=(...n)=>s.handleInputImg&&s.handleInputImg(...n))},null,544),t[5]||(t[5]=(0,o.Lk)("div",{class:"mask"},[(0,o.Lk)("i",{class:"iconfont icon-icon_update"})],-1))])]))],512),(0,o.Lk)("div",U,[t[8]||(t[8]=(0,o.Lk)("div",{class:"title"},"处理效果",-1)),(0,o.Lk)("div",A,[l.isLoading?((0,o.uX)(),(0,o.CE)("div",F,t[7]||(t[7]=[(0,o.Lk)("div",{class:"loader"},null,-1),(0,o.Lk)("div",null,"处理中...",-1)]))):((0,o.uX)(),(0,o.CE)("div",O,[(0,o.Lk)("img",{src:l.resultImgUrl,alt:"效果图"},null,8,R)]))])],512)])):(0,o.Q3)("",!0),l.historyList.length?((0,o.uX)(),(0,o.CE)("div",X,[t[11]||(t[11]=(0,o.Lk)("h2",null,"历史记录",-1)),(0,o.Lk)("div",S,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.historyList,((n,e)=>((0,o.uX)(),(0,o.CE)("div",{class:"item",key:e},[(0,o.Lk)("div",$,[t[9]||(t[9]=(0,o.Lk)("span",null,"原图",-1)),(0,o.Lk)("img",{src:n.original,alt:"原图"},null,8,T)]),(0,o.Lk)("div",B,[t[10]||(t[10]=(0,o.Lk)("span",null,"效果图",-1)),(0,o.Lk)("img",{src:n.handled,alt:"效果图"},null,8,P)])])))),128))])])):(0,o.Q3)("",!0)])])}var D=e(4373),Q={data(){return{showUpload:!0,originalImgFlag:!1,originalImg:null,uploadedFilename:"",resultImgUrl:"",isLoading:!0,BASE_URL:"http://localhost:5000",historyList:[]}},methods:{uploadImg1(){this.$refs.input_img1.click()},uploadImg2(){this.$refs.input_img2.click()},resetValue(){this.isLoading=!0},handleInputImg(n){const t=n.target.files[0];if(t&&t.type.startsWith("image/")){const n=new FileReader;n.onload=n=>{this.originalImg=n.target.result,this.originalImgFlag=!0,this.beginAnimate()},n.readAsDataURL(t);const e=new FormData;e.append("file",t),this.uploadedFilename=t.name,console.log("handleInputImg"),this.resetValue(),D.A.post(this.BASE_URL+"/upload",e).then((()=>{this.triggerEnhance()})).catch((n=>{console.error("上传失败:",n)}))}else alert("请选择有效的图片文件（jpg/png等）")},beginAnimate(){this.$nextTick((()=>{const n=this.$refs.uploadLeft,t=this.$refs.uploadRight;n.style.transition="all 1s",n.style.marginLeft="0px",setTimeout((()=>{t.style.transition="all 1s",t.style.opacity=1}),500)}))},triggerEnhance(){console.log("triggerEnhance"),D.A.post(this.BASE_URL+"/run").then((n=>{console.log("处理成功"+n.data),this.pollForResult()})).catch((n=>{console.error("触发处理失败:",n)}))},pollForResult(){console.log("pollForResult");const n=this.uploadedFilename,t=`${this.BASE_URL}/result/handled/${n}`,e=()=>{D.A.get(t,{responseType:"blob"}).then((n=>{console.log(n),this.resultImgUrl=t,this.isLoading=!1,this.historyList.unshift({original:this.originalImg,handled:this.resultImgUrl})})).catch((()=>{setTimeout(e,2e3)}))};e()}}};const V=(0,s.A)(Q,[["render",M]]);var W=V;const K=[{path:"/",name:"home",component:y},{path:"/more_scenes",name:"moreScenes",component:W}],q=(0,c.aE)({history:(0,c.LA)("/"),routes:K});var z=q,G=e(782),H=(0,G.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,i.Ef)(u).use(H).use(z).mount("#app")},4215:function(n,t,e){n.exports=e.p+"img/ori_2.f75665ce.jpg"},4976:function(n,t,e){n.exports=e.p+"img/handled_2.a76ad791.jpg"},6760:function(n,t,e){n.exports=e.p+"img/ori_1.60c4439d.jpg"},8378:function(n,t,e){n.exports=e.p+"img/ori_3.6d7d06c4.jpg"},8703:function(n,t,e){n.exports=e.p+"img/handled_1.3e8e67b7.jpg"},9273:function(n,t,e){n.exports=e.p+"img/ori_4.fe7c1f9d.jpg"},9869:function(n,t,e){n.exports=e.p+"img/handled_3.a163d890.jpg"}},t={};function e(i){var o=t[i];if(void 0!==o)return o.exports;var l=t[i]={exports:{}};return n[i].call(l.exports,l,l.exports,e),l.exports}e.m=n,function(){var n=[];e.O=function(t,i,o,l){if(!i){var s=1/0;for(c=0;c<n.length;c++){i=n[c][0],o=n[c][1],l=n[c][2];for(var r=!0,a=0;a<i.length;a++)(!1&l||s>=l)&&Object.keys(e.O).every((function(n){return e.O[n](i[a])}))?i.splice(a--,1):(r=!1,l<s&&(s=l));if(r){n.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=n.length;c>0&&n[c-1][2]>l;c--)n[c]=n[c-1];n[c]=[i,o,l]}}(),function(){e.n=function(n){var t=n&&n.__esModule?function(){return n["default"]}:function(){return n};return e.d(t,{a:t}),t}}(),function(){e.d=function(n,t){for(var i in t)e.o(t,i)&&!e.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:t[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()}(),function(){e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)}}(),function(){e.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}}(),function(){e.p="/"}(),function(){var n={524:0};e.O.j=function(t){return 0===n[t]};var t=function(t,i){var o,l,s=i[0],r=i[1],a=i[2],u=0;if(s.some((function(t){return 0!==n[t]}))){for(o in r)e.o(r,o)&&(e.m[o]=r[o]);if(a)var c=a(e)}for(t&&t(i);u<s.length;u++)l=s[u],e.o(n,l)&&n[l]&&n[l][0](),n[l]=0;return e.O(c)},i=self["webpackChunklow_light_enhance"]=self["webpackChunklow_light_enhance"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=e.O(void 0,[504],(function(){return e(1475)}));i=e.O(i)})();
//# sourceMappingURL=app.973723ed.js.map